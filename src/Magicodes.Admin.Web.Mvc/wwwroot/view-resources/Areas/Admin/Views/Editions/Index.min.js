(function(){$(function(){function f(t){abp.message.confirm(app.localize("EditionDeleteWarningMessage",t.displayName),function(r){r&&i.deleteEdition({id:t.id}).done(function(){n();abp.notify.success(app.localize("SuccessfullyDeleted"))})})}function n(){t.jtable("load")}var t=$("#EditionsTable"),i=abp.services.app.edition,r={create:abp.auth.hasPermission("Pages.Editions.Create"),edit:abp.auth.hasPermission("Pages.Editions.Edit"),"delete":abp.auth.hasPermission("Pages.Editions.Delete")},u=new app.ModalManager({viewUrl:abp.appPath+"Admin/Editions/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/Admin/Views/Editions/_CreateOrEditModal.js",modalClass:"CreateOrEditEditionModal"});t.jtable({title:app.localize("Editions"),actions:{listAction:{method:i.getEditions}},fields:{id:{key:!0,list:!1},actions:{title:app.localize("Actions"),width:"30%",sorting:!1,type:"record-actions",cssClass:"btn btn-xs btn-primary blue",text:'<i class="fa fa-cog"><\/i> '+app.localize("Actions")+' <span class="caret"><\/span>',items:[{text:app.localize("Edit"),visible:function(){return r.edit},action:function(n){u.open({id:n.record.id})}},{text:app.localize("Delete"),visible:function(){return r.delete},action:function(n){f(n.record)}}]},displayName:{title:app.localize("EditionName"),width:"35%"},creationTime:{title:app.localize("CreationTime"),width:"35%",display:function(n){return moment(n.record.creationTime).format("L")}}}});$("#CreateNewEditionButton").click(function(){u.open()});abp.event.on("app.createOrEditEditionModalSaved",function(){n()});n()})})();