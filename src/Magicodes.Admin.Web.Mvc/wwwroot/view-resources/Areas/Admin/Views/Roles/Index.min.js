(function(){$(function(){function f(t){abp.message.confirm(app.localize("RoleDeleteWarningMessage",t.displayName),function(r){r&&i.deleteRole({id:t.id}).done(function(){n();abp.notify.success(app.localize("SuccessfullyDeleted"))})})}function n(){t.jtable("load",{permission:$("#PermissionSelectionCombo").val()})}var t=$("#RolesTable"),i=abp.services.app.role,r={create:abp.auth.hasPermission("Pages.Administration.Roles.Create"),edit:abp.auth.hasPermission("Pages.Administration.Roles.Edit"),"delete":abp.auth.hasPermission("Pages.Administration.Roles.Delete")},u=new app.ModalManager({viewUrl:abp.appPath+"Admin/Roles/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/Admin/Views/Roles/_CreateOrEditModal.js",modalClass:"CreateOrEditRoleModal"});t.jtable({title:app.localize("Roles"),actions:{listAction:{method:i.getRoles}},fields:{id:{key:!0,list:!1},actions:{title:app.localize("Actions"),width:"30%",sorting:!1,type:"record-actions",cssClass:"btn btn-xs btn-primary blue",text:'<i class="fa fa-cog"><\/i> '+app.localize("Actions")+' <span class="caret"><\/span>',items:[{text:app.localize("Edit"),visible:function(){return r.edit},action:function(n){u.open({id:n.record.id})}},{text:app.localize("Delete"),visible:function(n){return!n.record.isStatic&&r.delete},action:function(n){f(n.record)}}]},displayName:{title:app.localize("RoleName"),width:"35%",display:function(n){var t=$("<span><\/span>");return t.append(n.record.displayName+" &nbsp; "),n.record.isStatic&&t.append('<span class="label label-info" data-toggle="tooltip" title="'+app.localize("StaticRole_Tooltip")+'" data-placement="top">'+app.localize("Static")+"<\/span>&nbsp;"),n.record.isDefault&&t.append('<span class="label label-default" data-toggle="tooltip" title="'+app.localize("DefaultRole_Description")+'" data-placement="top">'+app.localize("Default")+"<\/span>&nbsp;"),t.find("[data-toggle=tooltip]").tooltip(),t}},creationTime:{title:app.localize("CreationTime"),width:"35%",display:function(n){return moment(n.record.creationTime).format("L")}}}});$("#CreateNewRoleButton").click(function(){u.open()});$("#RefreshRolesButton").click(function(t){t.preventDefault();n()});abp.event.on("app.createOrEditRoleModalSaved",function(){n()});n()})})();