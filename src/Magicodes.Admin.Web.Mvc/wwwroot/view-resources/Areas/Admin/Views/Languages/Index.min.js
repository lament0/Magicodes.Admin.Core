(function(){$(function(){function e(n){r.setDefaultLanguage({name:n.name}).done(function(){t();abp.notify.success(app.localize("SuccessfullySaved"))})}function o(n){abp.message.confirm(app.localize("LanguageDeleteWarningMessage",n.displayName),function(i){i&&r.deleteLanguage({id:n.id}).done(function(){t();abp.notify.success(app.localize("SuccessfullyDeleted"))})})}function t(){i.jtable("load")}var i=$("#LanguagesTable"),r=abp.services.app.language,u=null,n={create:abp.auth.hasPermission("Pages.Administration.Languages.Create"),edit:abp.auth.hasPermission("Pages.Administration.Languages.Edit"),changeTexts:abp.auth.hasPermission("Pages.Administration.Languages.ChangeTexts"),"delete":abp.auth.hasPermission("Pages.Administration.Languages.Delete")},f=new app.ModalManager({viewUrl:abp.appPath+"Admin/Languages/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/Admin/Views/Languages/_CreateOrEditModal.js",modalClass:"CreateOrEditLanguageModal"});i.jtable({title:app.localize("Languages"),actions:{listAction:{method:r.getLanguages}},fields:{id:{key:!0,list:!1},actions:{title:app.localize("Actions"),width:"30%",sorting:!1,type:"record-actions",cssClass:"btn btn-xs btn-primary blue",text:'<i class="fa fa-cog"><\/i> '+app.localize("Actions")+' <span class="caret"><\/span>',items:[{text:app.localize("Edit"),visible:function(t){return n.edit&&t.record.tenantId===abp.session.tenantId},action:function(n){f.open({id:n.record.id})}},{text:app.localize("ChangeTexts"),visible:function(){return n.changeTexts},action:function(n){document.location.href=abp.appPath+"Admin/Languages/Texts?languageName="+n.record.name}},{text:app.localize("SetAsDefaultLanguage"),visible:function(){return n.edit},action:function(n){e(n.record)}},{text:app.localize("Delete"),visible:function(t){return n.delete&&t.record.tenantId===abp.session.tenantId},action:function(n){o(n.record)}}]},displayName:{title:app.localize("Name"),width:"30%",display:function(n){var t=$("<span><\/span>");return t.append('<i class="'+n.record.icon+'"><\/i>'),t.append(" &nbsp; "),t.append('<span data-language-name="'+n.record.name+'">'+n.record.displayName+"<\/span>"),t}},name:{title:app.localize("Code"),width:"10%"},tenantId:{title:app.localize("Default")+"*",width:"10%",list:abp.session.tenantId?!0:!1,display:function(n){var t=$("<span><\/span>");return n.record.tenantId!=abp.session.tenantId?t.append('<span class="label label-default">'+app.localize("Yes")+"<\/span>"):t.append('<span class="label label-success">'+app.localize("No")+"<\/span>"),t}},creationTime:{title:app.localize("CreationTime"),width:"20%",display:function(n){return moment(n.record.creationTime).format("L")}},isDisabled:{title:app.localize("IsDisabled"),width:"8%",display:function(n){return n.record.isDisabled?'<span class="label label-default">'+app.localize("Yes")+"<\/span>":'<span class="label label-success">'+app.localize("No")+"<\/span>"}}},recordsLoaded:function(n,t){u=t.serverResponse.originalResult.defaultLanguageName;i.find("[data-language-name="+u+"]").addClass("text-bold").append(" ("+app.localize("Default")+")")}});$("#CreateNewLanguageButton").click(function(){f.open()});abp.event.on("app.createOrEditLanguageModalSaved",function(){t()});t()})})();